<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.5.0_14) on Fri Mar 26 10:23:46 GMT-08:00 2010 -->
<TITLE>
VeriplaceState
</TITLE>

<META NAME="keywords" CONTENT="com.veriplace.web.VeriplaceState class">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    parent.document.title="VeriplaceState";
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../com/veriplace/web/Veriplace.html" title="class in com.veriplace.web"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../com/veriplace/web/WaitingException.html" title="class in com.veriplace.web"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?com/veriplace/web/VeriplaceState.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="VeriplaceState.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
com.veriplace.web</FONT>
<BR>
Class VeriplaceState</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../../resources/inherit.gif" ALT="extended by "><B>com.veriplace.web.VeriplaceState</B>
</PRE>
<HR>
<DL>
<DT><PRE>public class <B>VeriplaceState</B><DT>extends java.lang.Object</DL>
</PRE>

<P>
Veriplace user, location, and permission information associated with the current HTTP request.
 <p>
 When you start processing a request, call <A HREF="../../../com/veriplace/web/Veriplace.html#open(javax.servlet.http.HttpServletRequest, javax.servlet.http.HttpServletResponse)"><CODE>Veriplace.open(HttpServletRequest, HttpServletResponse)</CODE></A>
 on the Veriplace object to obtain an instance of VeriplaceState.  (The state object
 is cached, so you can always obtain the same one by passing the same request to open().)
 Whenever a method such as <A HREF="../../../com/veriplace/web/Veriplace.html#requireLocation(com.veriplace.web.VeriplaceState)"><CODE>Veriplace.requireLocation(VeriplaceState)</CODE></A> completes
 successfully, it updates the properties of the VeriplaceState.
<P>

<P>
<HR>

<P>

<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../com/veriplace/web/VeriplaceState.html#VeriplaceState(com.veriplace.web.Veriplace, javax.servlet.http.HttpServletRequest, javax.servlet.http.HttpServletResponse)">VeriplaceState</A></B>(<A HREF="../../../com/veriplace/web/Veriplace.html" title="class in com.veriplace.web">Veriplace</A>&nbsp;veriplace,
               <A HREF="http://java.sun.com/j2ee/sdk_1.3/techdocs/api/javax/servlet/http/HttpServletRequest.html" title="class or interface in javax.servlet.http">HttpServletRequest</A>&nbsp;request,
               <A HREF="http://java.sun.com/j2ee/sdk_1.3/techdocs/api/javax/servlet/http/HttpServletResponse.html" title="class or interface in javax.servlet.http">HttpServletResponse</A>&nbsp;response)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/veriplace/web/VeriplaceState.html#getAllFields()">getAllFields</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Creates HTML hidden form fields for all currently defined persistent attributes.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.util.Map&lt;java.lang.String,java.lang.String[]&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/veriplace/web/VeriplaceState.html#getCallbackParameters()">getCallbackParameters</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the names and values of all HTTP query string or form parameters that will be
 preserved across a redirect and callback.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;<A HREF="../../../com/veriplace/web/VeriplaceState.html" title="class in com.veriplace.web">VeriplaceState</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/veriplace/web/VeriplaceState.html#getFromRequest(javax.servlet.http.HttpServletRequest)">getFromRequest</A></B>(<A HREF="http://java.sun.com/j2ee/sdk_1.3/techdocs/api/javax/servlet/http/HttpServletRequest.html" title="class or interface in javax.servlet.http">HttpServletRequest</A>&nbsp;request)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns a VeriplaceState instance if one has previously been attached to the given
 HTTP request using <A HREF="../../../com/veriplace/web/Veriplace.html#open(javax.servlet.http.HttpServletRequest, javax.servlet.http.HttpServletResponse)"><CODE>Veriplace.open(HttpServletRequest, HttpServletResponse)</CODE></A>,
 or null if there is none.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="http://developer.veriplace.com/docs/java/api-oauth/com/veriplace/oauth/consumer/Token.html" title="class or interface in com.veriplace.oauth.consumer">Token</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/veriplace/web/VeriplaceState.html#getGetLocationPermissionToken()">getGetLocationPermissionToken</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the current permission token for getting location, if any.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../com/veriplace/client/VeriplaceException.html" title="class in com.veriplace.client">VeriplaceException</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/veriplace/web/VeriplaceState.html#getLastErrorException()">getLastErrorException</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the last <A HREF="../../../com/veriplace/client/VeriplaceException.html" title="class in com.veriplace.client"><CODE>VeriplaceException</CODE></A> that occurred for
 the current request, or null if the last request was successful.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../com/veriplace/client/Location.html" title="class in com.veriplace.client">Location</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/veriplace/web/VeriplaceState.html#getLocation()">getLocation</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the <A HREF="../../../com/veriplace/client/Location.html" title="class in com.veriplace.client"><CODE>Location</CODE></A> object describing the last acquired
 location of the current Veriplace user, or null if you have not acquired a location.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/veriplace/web/VeriplaceState.html#getLocationMode()">getLocationMode</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;See <A HREF="../../../com/veriplace/web/VeriplaceState.html#setLocationMode(java.lang.String)"><CODE>setLocationMode(String)</CODE></A>.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="http://java.sun.com/j2ee/sdk_1.3/techdocs/api/javax/servlet/http/HttpServletRequest.html" title="class or interface in javax.servlet.http">HttpServletRequest</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/veriplace/web/VeriplaceState.html#getRequest()">getRequest</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the current <A HREF="http://java.sun.com/j2ee/sdk_1.3/techdocs/api/javax/servlet/http/HttpServletRequest.html" title="class or interface in javax.servlet.http"><CODE>HttpServletRequest</CODE></A>.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="http://java.sun.com/j2ee/sdk_1.3/techdocs/api/javax/servlet/http/HttpServletResponse.html" title="class or interface in javax.servlet.http">HttpServletResponse</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/veriplace/web/VeriplaceState.html#getResponse()">getResponse</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the current <A HREF="http://java.sun.com/j2ee/sdk_1.3/techdocs/api/javax/servlet/http/HttpServletResponse.html" title="class or interface in javax.servlet.http"><CODE>HttpServletResponse</CODE></A>.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="http://developer.veriplace.com/docs/java/api-oauth/com/veriplace/oauth/consumer/Token.html" title="class or interface in com.veriplace.oauth.consumer">Token</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/veriplace/web/VeriplaceState.html#getSetLocationPermissionToken()">getSetLocationPermissionToken</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the current permission token for changing location, if any.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../com/veriplace/client/User.html" title="class in com.veriplace.client">User</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/veriplace/web/VeriplaceState.html#getUser()">getUser</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the <A HREF="../../../com/veriplace/client/User.html" title="class in com.veriplace.client"><CODE>User</CODE></A> object representing the current Veriplace
 user, or null if the user has not yet been determined.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/veriplace/web/VeriplaceState.html#getUserFields()">getUserFields</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Creates HTML hidden form fields for the current user identity.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../com/veriplace/web/Veriplace.html" title="class in com.veriplace.web">Veriplace</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/veriplace/web/VeriplaceState.html#getVeriplace()">getVeriplace</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the current <A HREF="../../../com/veriplace/web/Veriplace.html" title="class in com.veriplace.web"><CODE>Veriplace</CODE></A> instance.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/veriplace/web/VeriplaceState.html#hasGetLocationPermission()">hasGetLocationPermission</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns true if you have obtained permission to get a user's location.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/veriplace/web/VeriplaceState.html#hasSetLocationPermission()">hasSetLocationPermission</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns true if you have obtained permission to change a user's location.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/veriplace/web/VeriplaceState.html#isAsynchronousRequestAllowed()">isAsynchronousRequestAllowed</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;See <A HREF="../../../com/veriplace/web/VeriplaceState.html#setAsynchronousRequestAllowed(boolean)"><CODE>setAsynchronousRequestAllowed(boolean)</CODE></A>.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/veriplace/web/VeriplaceState.html#isCallback()">isCallback</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns true if this request originated in a callback from the Veriplace website.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/veriplace/web/VeriplaceState.html#isError()">isError</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns true if the last request caused an error.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/veriplace/web/VeriplaceState.html#isUserInteractionAllowed()">isUserInteractionAllowed</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;See <A HREF="../../../com/veriplace/web/VeriplaceState.html#setUserInteractionAllowed(boolean)"><CODE>setUserInteractionAllowed(boolean)</CODE></A>.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/veriplace/web/VeriplaceState.html#requireGetLocationPermission()">requireGetLocationPermission</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Attempts to obtain permission to locate the current Veriplace user, if that permission isn't
 already present in the current state.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/veriplace/web/VeriplaceState.html#requireGetLocationPermissionImmediate()">requireGetLocationPermissionImmediate</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Attempts to obtain permission to locate the current Veriplace user, if that permission isn't
 already present in the current state.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/veriplace/web/VeriplaceState.html#requireLocation()">requireLocation</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Attempts to locate the current Veriplace user, if a location isn't already present in the
 current state.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/veriplace/web/VeriplaceState.html#requireLocation(long)">requireLocation</A></B>(long&nbsp;locationId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Attempts to retrieve a previously retrieved location again, using its ID (from
 <A HREF="../../../com/veriplace/client/Location.html#getId()"><CODE>Location.getId()</CODE></A>).</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/veriplace/web/VeriplaceState.html#requireSetLocationPermission()">requireSetLocationPermission</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Attempts to obtain permission to change the current Veriplace user's location, if that
 permission isn't already present in the current state.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/veriplace/web/VeriplaceState.html#requireUser()">requireUser</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Attempts to acquire the current Veriplace user identifier, if it isn't already present
 in the current state.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/veriplace/web/VeriplaceState.html#requireUser(com.veriplace.client.UserDiscoveryParameters)">requireUser</A></B>(<A HREF="../../../com/veriplace/client/UserDiscoveryParameters.html" title="class in com.veriplace.client">UserDiscoveryParameters</A>&nbsp;parameters)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Attempts to acquire the current Veriplace user identifier using identifying information in
 <A HREF="../../../com/veriplace/client/UserDiscoveryParameters.html" title="class in com.veriplace.client"><CODE>UserDiscoveryParameters</CODE></A>.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/veriplace/web/VeriplaceState.html#requireUserImmediate()">requireUserImmediate</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Attempts to acquire the current Veriplace user identifier, if it isn't already present
 in the current state, without providing any identifying properties and without redirecting.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/veriplace/web/VeriplaceState.html#setAsynchronousRequestAllowed(boolean)">setAsynchronousRequestAllowed</A></B>(boolean&nbsp;asynchronousRequestAllowed)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Specifies whether the Veriplace client can perform location requests asynchronously
 using a background thread.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/veriplace/web/VeriplaceState.html#setCallbackParameter(java.lang.String, java.lang.Long)">setCallbackParameter</A></B>(java.lang.String&nbsp;name,
                     java.lang.Long&nbsp;value)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Specifies an additional HTTP parameter to be preserved across redirects and callbacks.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/veriplace/web/VeriplaceState.html#setCallbackParameter(java.lang.String, java.lang.String)">setCallbackParameter</A></B>(java.lang.String&nbsp;name,
                     java.lang.String&nbsp;value)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Specifies an additional HTTP parameter to be preserved across redirects and callbacks.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/veriplace/web/VeriplaceState.html#setCallbackParameter(java.lang.String, java.lang.String[])">setCallbackParameter</A></B>(java.lang.String&nbsp;name,
                     java.lang.String[]&nbsp;values)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Specifies an additional HTTP parameter to be preserved across redirects and callbacks.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/veriplace/web/VeriplaceState.html#setGetLocationPermissionToken(com.veriplace.oauth.consumer.Token)">setGetLocationPermissionToken</A></B>(<A HREF="http://developer.veriplace.com/docs/java/api-oauth/com/veriplace/oauth/consumer/Token.html" title="class or interface in com.veriplace.oauth.consumer">Token</A>&nbsp;token)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Specifies an access token for getting location.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/veriplace/web/VeriplaceState.html#setLocationMode(java.lang.String)">setLocationMode</A></B>(java.lang.String&nbsp;locationMode)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sets the location mode to be used for subsequent location requests on this state.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/veriplace/web/VeriplaceState.html#setSetLocationPermissionToken(com.veriplace.oauth.consumer.Token)">setSetLocationPermissionToken</A></B>(<A HREF="http://developer.veriplace.com/docs/java/api-oauth/com/veriplace/oauth/consumer/Token.html" title="class or interface in com.veriplace.oauth.consumer">Token</A>&nbsp;token)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Specifies an access token for changing the user's location.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/veriplace/web/VeriplaceState.html#setUser(long)">setUser</A></B>(long&nbsp;userId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sets the current Veriplace user.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/veriplace/web/VeriplaceState.html#setUser(com.veriplace.client.User)">setUser</A></B>(<A HREF="../../../com/veriplace/client/User.html" title="class in com.veriplace.client">User</A>&nbsp;user)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sets the current Veriplace user.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/veriplace/web/VeriplaceState.html#setUserInteractionAllowed(boolean)">setUserInteractionAllowed</A></B>(boolean&nbsp;userInteractionAllowed)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Specifies whether the Veriplace server is allowed to prompt the end user to log in
 or to grant location permission.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/veriplace/web/VeriplaceState.html#setUserLocation(com.veriplace.client.SetLocationParameters)">setUserLocation</A></B>(<A HREF="../../../com/veriplace/client/SetLocationParameters.html" title="class in com.veriplace.client">SetLocationParameters</A>&nbsp;parameters)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Attempts to change the current Veriplace user's location.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="VeriplaceState(com.veriplace.web.Veriplace, javax.servlet.http.HttpServletRequest, javax.servlet.http.HttpServletResponse)"><!-- --></A><H3>
VeriplaceState</H3>
<PRE>
public <B>VeriplaceState</B>(<A HREF="../../../com/veriplace/web/Veriplace.html" title="class in com.veriplace.web">Veriplace</A>&nbsp;veriplace,
                      <A HREF="http://java.sun.com/j2ee/sdk_1.3/techdocs/api/javax/servlet/http/HttpServletRequest.html" title="class or interface in javax.servlet.http">HttpServletRequest</A>&nbsp;request,
                      <A HREF="http://java.sun.com/j2ee/sdk_1.3/techdocs/api/javax/servlet/http/HttpServletResponse.html" title="class or interface in javax.servlet.http">HttpServletResponse</A>&nbsp;response)</PRE>
<DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="getFromRequest(javax.servlet.http.HttpServletRequest)"><!-- --></A><H3>
getFromRequest</H3>
<PRE>
public static <A HREF="../../../com/veriplace/web/VeriplaceState.html" title="class in com.veriplace.web">VeriplaceState</A> <B>getFromRequest</B>(<A HREF="http://java.sun.com/j2ee/sdk_1.3/techdocs/api/javax/servlet/http/HttpServletRequest.html" title="class or interface in javax.servlet.http">HttpServletRequest</A>&nbsp;request)</PRE>
<DL>
<DD>Returns a VeriplaceState instance if one has previously been attached to the given
 HTTP request using <A HREF="../../../com/veriplace/web/Veriplace.html#open(javax.servlet.http.HttpServletRequest, javax.servlet.http.HttpServletResponse)"><CODE>Veriplace.open(HttpServletRequest, HttpServletResponse)</CODE></A>,
 or null if there is none.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getVeriplace()"><!-- --></A><H3>
getVeriplace</H3>
<PRE>
public <A HREF="../../../com/veriplace/web/Veriplace.html" title="class in com.veriplace.web">Veriplace</A> <B>getVeriplace</B>()</PRE>
<DL>
<DD>Returns the current <A HREF="../../../com/veriplace/web/Veriplace.html" title="class in com.veriplace.web"><CODE>Veriplace</CODE></A> instance.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getRequest()"><!-- --></A><H3>
getRequest</H3>
<PRE>
public <A HREF="http://java.sun.com/j2ee/sdk_1.3/techdocs/api/javax/servlet/http/HttpServletRequest.html" title="class or interface in javax.servlet.http">HttpServletRequest</A> <B>getRequest</B>()</PRE>
<DL>
<DD>Returns the current <A HREF="http://java.sun.com/j2ee/sdk_1.3/techdocs/api/javax/servlet/http/HttpServletRequest.html" title="class or interface in javax.servlet.http"><CODE>HttpServletRequest</CODE></A>.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getResponse()"><!-- --></A><H3>
getResponse</H3>
<PRE>
public <A HREF="http://java.sun.com/j2ee/sdk_1.3/techdocs/api/javax/servlet/http/HttpServletResponse.html" title="class or interface in javax.servlet.http">HttpServletResponse</A> <B>getResponse</B>()</PRE>
<DL>
<DD>Returns the current <A HREF="http://java.sun.com/j2ee/sdk_1.3/techdocs/api/javax/servlet/http/HttpServletResponse.html" title="class or interface in javax.servlet.http"><CODE>HttpServletResponse</CODE></A>.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getUser()"><!-- --></A><H3>
getUser</H3>
<PRE>
public <A HREF="../../../com/veriplace/client/User.html" title="class in com.veriplace.client">User</A> <B>getUser</B>()</PRE>
<DL>
<DD>Returns the <A HREF="../../../com/veriplace/client/User.html" title="class in com.veriplace.client"><CODE>User</CODE></A> object representing the current Veriplace
 user, or null if the user has not yet been determined.  To discover the current user,
 call <A HREF="../../../com/veriplace/web/Veriplace.html#requireUser(com.veriplace.web.VeriplaceState)"><CODE>Veriplace.requireUser(VeriplaceState)</CODE></A>.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="setUser(com.veriplace.client.User)"><!-- --></A><H3>
setUser</H3>
<PRE>
public void <B>setUser</B>(<A HREF="../../../com/veriplace/client/User.html" title="class in com.veriplace.client">User</A>&nbsp;user)</PRE>
<DL>
<DD>Sets the current Veriplace user.  You may wish to do this directly if you had previously
 obtained a user with <A HREF="../../../com/veriplace/web/Veriplace.html#requireUser(com.veriplace.web.VeriplaceState)"><CODE>Veriplace.requireUser(VeriplaceState)</CODE></A> and stored the user
 object for future reference.
<P>
<DD><DL>
<DT><B>See Also:</B><DD><A HREF="../../../com/veriplace/web/VeriplaceState.html#setUser(long)"><CODE>setUser(long)</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="setUser(long)"><!-- --></A><H3>
setUser</H3>
<PRE>
public void <B>setUser</B>(long&nbsp;userId)</PRE>
<DL>
<DD>Sets the current Veriplace user.  You may wish to do this directly if you had previously
 obtained a user with <A HREF="../../../com/veriplace/web/Veriplace.html#requireUser(com.veriplace.web.VeriplaceState)"><CODE>Veriplace.requireUser(VeriplaceState)</CODE></A> and stored the user
 object for future reference.
<P>
<DD><DL>
<DT><B>See Also:</B><DD><A HREF="../../../com/veriplace/web/VeriplaceState.html#setUser(com.veriplace.client.User)"><CODE>setUser(User)</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="getLocation()"><!-- --></A><H3>
getLocation</H3>
<PRE>
public <A HREF="../../../com/veriplace/client/Location.html" title="class in com.veriplace.client">Location</A> <B>getLocation</B>()</PRE>
<DL>
<DD>Returns the <A HREF="../../../com/veriplace/client/Location.html" title="class in com.veriplace.client"><CODE>Location</CODE></A> object describing the last acquired
 location of the current Veriplace user, or null if you have not acquired a location.
 To acquire a location, call <A HREF="../../../com/veriplace/web/Veriplace.html#requireLocation(com.veriplace.web.VeriplaceState)"><CODE>Veriplace.requireLocation(VeriplaceState)</CODE></A>.
 <p>
 If you have used <A HREF="../../../com/veriplace/web/Veriplace.html#setUserLocation(com.veriplace.web.VeriplaceState, com.veriplace.client.SetLocationParameters)"><CODE>Veriplace.setUserLocation(VeriplaceState, com.veriplace.client.SetLocationParameters)</CODE></A>
 to update the user's location, getLocation will return the updated location details.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getLocationMode()"><!-- --></A><H3>
getLocationMode</H3>
<PRE>
public java.lang.String <B>getLocationMode</B>()</PRE>
<DL>
<DD>See <A HREF="../../../com/veriplace/web/VeriplaceState.html#setLocationMode(java.lang.String)"><CODE>setLocationMode(String)</CODE></A>.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="setLocationMode(java.lang.String)"><!-- --></A><H3>
setLocationMode</H3>
<PRE>
public void <B>setLocationMode</B>(java.lang.String&nbsp;locationMode)</PRE>
<DL>
<DD>Sets the location mode to be used for subsequent location requests on this state.
 See <A HREF="../../../com/veriplace/client/LocationMode.html" title="interface in com.veriplace.client"><CODE>LocationMode</CODE></A> for allowable values.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="isUserInteractionAllowed()"><!-- --></A><H3>
isUserInteractionAllowed</H3>
<PRE>
public boolean <B>isUserInteractionAllowed</B>()</PRE>
<DL>
<DD>See <A HREF="../../../com/veriplace/web/VeriplaceState.html#setUserInteractionAllowed(boolean)"><CODE>setUserInteractionAllowed(boolean)</CODE></A>.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="setUserInteractionAllowed(boolean)"><!-- --></A><H3>
setUserInteractionAllowed</H3>
<PRE>
public void <B>setUserInteractionAllowed</B>(boolean&nbsp;userInteractionAllowed)</PRE>
<DL>
<DD>Specifies whether the Veriplace server is allowed to prompt the end user to log in
 or to grant location permission.  By default, it is.  If you set this value to false,
 then user discovery or location requests may still redirect silently to the Veriplace
 server (because OAuth authentication requires this), but if the server does not already
 know the user's identity or if the user has not already granted permission, the request
 will immediately fail.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="isAsynchronousRequestAllowed()"><!-- --></A><H3>
isAsynchronousRequestAllowed</H3>
<PRE>
public boolean <B>isAsynchronousRequestAllowed</B>()</PRE>
<DL>
<DD>See <A HREF="../../../com/veriplace/web/VeriplaceState.html#setAsynchronousRequestAllowed(boolean)"><CODE>setAsynchronousRequestAllowed(boolean)</CODE></A>.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="setAsynchronousRequestAllowed(boolean)"><!-- --></A><H3>
setAsynchronousRequestAllowed</H3>
<PRE>
public void <B>setAsynchronousRequestAllowed</B>(boolean&nbsp;asynchronousRequestAllowed)</PRE>
<DL>
<DD>Specifies whether the Veriplace client can perform location requests asynchronously
 using a background thread.  By default, it will; this requires that the application
 be able to handle a <A HREF="../../../com/veriplace/web/WaitingException.html" title="class in com.veriplace.web"><CODE>WaitingException</CODE></A> by displaying a progress page.  Setting
 this flag to false causes the client to perform all requests on the main thread; it
 will never throw a WaitingException in that case.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="hasGetLocationPermission()"><!-- --></A><H3>
hasGetLocationPermission</H3>
<PRE>
public boolean <B>hasGetLocationPermission</B>()</PRE>
<DL>
<DD>Returns true if you have obtained permission to get a user's location.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="hasSetLocationPermission()"><!-- --></A><H3>
hasSetLocationPermission</H3>
<PRE>
public boolean <B>hasSetLocationPermission</B>()</PRE>
<DL>
<DD>Returns true if you have obtained permission to change a user's location.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="isCallback()"><!-- --></A><H3>
isCallback</H3>
<PRE>
public boolean <B>isCallback</B>()</PRE>
<DL>
<DD>Returns true if this request originated in a callback from the Veriplace website.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="isError()"><!-- --></A><H3>
isError</H3>
<PRE>
public boolean <B>isError</B>()</PRE>
<DL>
<DD>Returns true if the last request caused an error.  Call <A HREF="../../../com/veriplace/web/VeriplaceState.html#getLastErrorException()"><CODE>getLastErrorException()</CODE></A>
 to get the details of the error.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getLastErrorException()"><!-- --></A><H3>
getLastErrorException</H3>
<PRE>
public <A HREF="../../../com/veriplace/client/VeriplaceException.html" title="class in com.veriplace.client">VeriplaceException</A> <B>getLastErrorException</B>()</PRE>
<DL>
<DD>Returns the last <A HREF="../../../com/veriplace/client/VeriplaceException.html" title="class in com.veriplace.client"><CODE>VeriplaceException</CODE></A> that occurred for
 the current request, or null if the last request was successful.  Note that a
 <A HREF="../../../com/veriplace/web/WaitingException.html" title="class in com.veriplace.web"><CODE>WaitingException</CODE></A> will not cause this property to be set, since it is not
 really an error.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getCallbackParameters()"><!-- --></A><H3>
getCallbackParameters</H3>
<PRE>
public java.util.Map&lt;java.lang.String,java.lang.String[]&gt; <B>getCallbackParameters</B>()</PRE>
<DL>
<DD>Returns the names and values of all HTTP query string or form parameters that will be
 preserved across a redirect and callback.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="setCallbackParameter(java.lang.String, java.lang.String)"><!-- --></A><H3>
setCallbackParameter</H3>
<PRE>
public void <B>setCallbackParameter</B>(java.lang.String&nbsp;name,
                                 java.lang.String&nbsp;value)</PRE>
<DL>
<DD>Specifies an additional HTTP parameter to be preserved across redirects and callbacks.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="setCallbackParameter(java.lang.String, java.lang.Long)"><!-- --></A><H3>
setCallbackParameter</H3>
<PRE>
public void <B>setCallbackParameter</B>(java.lang.String&nbsp;name,
                                 java.lang.Long&nbsp;value)</PRE>
<DL>
<DD>Specifies an additional HTTP parameter to be preserved across redirects and callbacks.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="setCallbackParameter(java.lang.String, java.lang.String[])"><!-- --></A><H3>
setCallbackParameter</H3>
<PRE>
public void <B>setCallbackParameter</B>(java.lang.String&nbsp;name,
                                 java.lang.String[]&nbsp;values)</PRE>
<DL>
<DD>Specifies an additional HTTP parameter to be preserved across redirects and callbacks.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getGetLocationPermissionToken()"><!-- --></A><H3>
getGetLocationPermissionToken</H3>
<PRE>
public <A HREF="http://developer.veriplace.com/docs/java/api-oauth/com/veriplace/oauth/consumer/Token.html" title="class or interface in com.veriplace.oauth.consumer">Token</A> <B>getGetLocationPermissionToken</B>()</PRE>
<DL>
<DD>Returns the current permission token for getting location, if any.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="setGetLocationPermissionToken(com.veriplace.oauth.consumer.Token)"><!-- --></A><H3>
setGetLocationPermissionToken</H3>
<PRE>
public void <B>setGetLocationPermissionToken</B>(<A HREF="http://developer.veriplace.com/docs/java/api-oauth/com/veriplace/oauth/consumer/Token.html" title="class or interface in com.veriplace.oauth.consumer">Token</A>&nbsp;token)</PRE>
<DL>
<DD>Specifies an access token for getting location.  Use this only if you're
 reusing a stored access token that you know to be valid; otherwise just call
 <A HREF="../../../com/veriplace/web/Veriplace.html#requireGetLocationPermission(com.veriplace.web.VeriplaceState)"><CODE>Veriplace.requireGetLocationPermission(VeriplaceState)</CODE></A>.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getSetLocationPermissionToken()"><!-- --></A><H3>
getSetLocationPermissionToken</H3>
<PRE>
public <A HREF="http://developer.veriplace.com/docs/java/api-oauth/com/veriplace/oauth/consumer/Token.html" title="class or interface in com.veriplace.oauth.consumer">Token</A> <B>getSetLocationPermissionToken</B>()</PRE>
<DL>
<DD>Returns the current permission token for changing location, if any.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="setSetLocationPermissionToken(com.veriplace.oauth.consumer.Token)"><!-- --></A><H3>
setSetLocationPermissionToken</H3>
<PRE>
public void <B>setSetLocationPermissionToken</B>(<A HREF="http://developer.veriplace.com/docs/java/api-oauth/com/veriplace/oauth/consumer/Token.html" title="class or interface in com.veriplace.oauth.consumer">Token</A>&nbsp;token)</PRE>
<DL>
<DD>Specifies an access token for changing the user's location.  Use this only if
 you're reusing a stored access token that you know to be valid; otherwise just call
 <A HREF="../../../com/veriplace/web/Veriplace.html#requireGetLocationPermission(com.veriplace.web.VeriplaceState)"><CODE>Veriplace.requireGetLocationPermission(VeriplaceState)</CODE></A>.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getUserFields()"><!-- --></A><H3>
getUserFields</H3>
<PRE>
public java.lang.String <B>getUserFields</B>()</PRE>
<DL>
<DD>Creates HTML hidden form fields for the current user identity.  Using JSP expression
 syntax, if the attribute name "state" refers to the VeriplaceState, you can simply
 write <tt>${state.userFields}</tt> to include these fields in a form.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getAllFields()"><!-- --></A><H3>
getAllFields</H3>
<PRE>
public java.lang.String <B>getAllFields</B>()</PRE>
<DL>
<DD>Creates HTML hidden form fields for all currently defined persistent attributes.
 Using JSP expression syntax, if the attribute name "state" refers to the VeriplaceState,
 you can simply write <tt>${state.allFields}</tt> to include these fields in a form.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="requireUser()"><!-- --></A><H3>
requireUser</H3>
<PRE>
public void <B>requireUser</B>()
                 throws <A HREF="../../../com/veriplace/web/RespondedException.html" title="class in com.veriplace.web">RespondedException</A>,
                        <A HREF="../../../com/veriplace/client/UserDiscoveryException.html" title="class in com.veriplace.client">UserDiscoveryException</A>,
                        <A HREF="../../../com/veriplace/client/UnexpectedException.html" title="class in com.veriplace.client">UnexpectedException</A>,
                        <A HREF="http://java.sun.com/j2ee/sdk_1.3/techdocs/api/javax/servlet/ServletException.html" title="class or interface in javax.servlet">ServletException</A></PRE>
<DL>
<DD>Attempts to acquire the current Veriplace user identifier, if it isn't already present
 in the current state.  After this method returns, call <A HREF="../../../com/veriplace/web/VeriplaceState.html#getUser()"><CODE>getUser()</CODE></A>
 on the VeriplaceState to get the Veriplace <A HREF="../../../com/veriplace/client/User.html" title="class in com.veriplace.client"><CODE>User</CODE></A> object.
 <p>
 If the user has already been acquired, or set explicitly with
 <A HREF="../../../com/veriplace/web/VeriplaceState.html#setUser(com.veriplace.client.User)"><CODE>setUser(com.veriplace.client.User)</CODE></A>, the method returns immediately.  Otherwise, it
 redirects to the Veriplace server to begin a user
 discovery transaction.  If the server can detect the current user without interaction,
 it redirects immediately back to your application; otherwise it prompts the user to log
 in (unless you have disabled this with <A HREF="../../../com/veriplace/web/VeriplaceState.html#setUserInteractionAllowed(boolean)"><CODE>setUserInteractionAllowed(boolean)</CODE></A>)
 and redirects back once they have done so.
 <p>
 When your application receives the callback, it will be to the same URL and with the same
 HTTP parameters as the initial request, but with an additional token to indicate that the
 user is now available.  You do not need to check for this token; just call requireUser()
 as you did before, and this time the method will return normally.
<P>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../com/veriplace/web/RespondedException.html" title="class in com.veriplace.web">RespondedException</A></CODE> - if the client has sent a redirect response; you should simply
   stop handling the request and return in this case
<DD><CODE><A HREF="../../../com/veriplace/client/UserDiscoveryException.html" title="class in com.veriplace.client">UserDiscoveryException</A></CODE> - if the current user could not be determined
<DD><CODE><A HREF="../../../com/veriplace/client/UnexpectedException.html" title="class in com.veriplace.client">UnexpectedException</A></CODE> - if there was an unexpected I/O error or OAUth error from the server
<DD><CODE><A HREF="http://java.sun.com/j2ee/sdk_1.3/techdocs/api/javax/servlet/ServletException.html" title="class or interface in javax.servlet">ServletException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="requireUser(com.veriplace.client.UserDiscoveryParameters)"><!-- --></A><H3>
requireUser</H3>
<PRE>
public void <B>requireUser</B>(<A HREF="../../../com/veriplace/client/UserDiscoveryParameters.html" title="class in com.veriplace.client">UserDiscoveryParameters</A>&nbsp;parameters)
                 throws <A HREF="../../../com/veriplace/web/RespondedException.html" title="class in com.veriplace.web">RespondedException</A>,
                        <A HREF="../../../com/veriplace/client/UserDiscoveryException.html" title="class in com.veriplace.client">UserDiscoveryException</A>,
                        <A HREF="../../../com/veriplace/client/UnexpectedException.html" title="class in com.veriplace.client">UnexpectedException</A>,
                        <A HREF="http://java.sun.com/j2ee/sdk_1.3/techdocs/api/javax/servlet/ServletException.html" title="class or interface in javax.servlet">ServletException</A></PRE>
<DL>
<DD>Attempts to acquire the current Veriplace user identifier using identifying information in
 <A HREF="../../../com/veriplace/client/UserDiscoveryParameters.html" title="class in com.veriplace.client"><CODE>UserDiscoveryParameters</CODE></A>.  In order to do this, you must
 have specified an application token and token secret in your Veriplace client configuration
 (see <A HREF="../../../com/veriplace/client/factory/ClientFactory.html" title="interface in com.veriplace.client.factory"><CODE>ClientFactory</CODE></A>).
 <p>
 If the user has already been acquired, or set explicitly with
 <A HREF="../../../com/veriplace/web/VeriplaceState.html#setUser(com.veriplace.client.User)"><CODE>setUser(com.veriplace.client.User)</CODE></A>, the method returns immediately.  Otherwise, it
 submits a request to the Veriplace server which will either succeed or immediately fail;
 there are no redirects.  If the method returns with no exceptions, call <A HREF="../../../com/veriplace/web/VeriplaceState.html#getUser()"><CODE>getUser()</CODE></A>
 to get the user object.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>parameters</CODE> - the identifying properties of the desired user
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../com/veriplace/web/RespondedException.html" title="class in com.veriplace.web">RespondedException</A></CODE> - can happen only if you've configured an automatic error response
   page; return immediately in this case
<DD><CODE><A HREF="../../../com/veriplace/client/UserDiscoveryException.html" title="class in com.veriplace.client">UserDiscoveryException</A></CODE> - if the user could not be found or your application lacks privileges
<DD><CODE><A HREF="../../../com/veriplace/client/UnexpectedException.html" title="class in com.veriplace.client">UnexpectedException</A></CODE> - if there was an unexpected I/O error or OAUth error from the server
<DD><CODE><A HREF="http://java.sun.com/j2ee/sdk_1.3/techdocs/api/javax/servlet/ServletException.html" title="class or interface in javax.servlet">ServletException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="requireUserImmediate()"><!-- --></A><H3>
requireUserImmediate</H3>
<PRE>
public void <B>requireUserImmediate</B>()
                          throws <A HREF="../../../com/veriplace/client/UserDiscoveryNotPermittedException.html" title="class in com.veriplace.client">UserDiscoveryNotPermittedException</A>,
                                 <A HREF="../../../com/veriplace/client/UnexpectedException.html" title="class in com.veriplace.client">UnexpectedException</A>,
                                 <A HREF="http://java.sun.com/j2ee/sdk_1.3/techdocs/api/javax/servlet/ServletException.html" title="class or interface in javax.servlet">ServletException</A></PRE>
<DL>
<DD>Attempts to acquire the current Veriplace user identifier, if it isn't already present
 in the current state, without providing any identifying properties and without redirecting.
 This will only work if you have just received a callback from a successful user discovery
 transaction.
 <p>
 If the user has already been acquired, or set explicitly with
 <A HREF="../../../com/veriplace/web/VeriplaceState.html#setUser(com.veriplace.client.User)"><CODE>setUser(com.veriplace.client.User)</CODE></A>, the method returns immediately.  Otherwise, it
 submits a request to the Veriplace server which will either succeed or immediately fail; there
 are no redirects.
 <p>
 If the method returns with no exceptions, call <A HREF="../../../com/veriplace/web/VeriplaceState.html#getUser()"><CODE>getUser()</CODE></A> to get the user object.
<P>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../com/veriplace/client/UserDiscoveryNotPermittedException.html" title="class in com.veriplace.client">UserDiscoveryNotPermittedException</A></CODE> - if you do not have a valid user discovery access token
<DD><CODE><A HREF="../../../com/veriplace/client/UnexpectedException.html" title="class in com.veriplace.client">UnexpectedException</A></CODE> - if there was an unexpected I/O error or OAUth error from the server
<DD><CODE><A HREF="http://java.sun.com/j2ee/sdk_1.3/techdocs/api/javax/servlet/ServletException.html" title="class or interface in javax.servlet">ServletException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="requireGetLocationPermission()"><!-- --></A><H3>
requireGetLocationPermission</H3>
<PRE>
public void <B>requireGetLocationPermission</B>()
                                  throws <A HREF="../../../com/veriplace/web/RespondedException.html" title="class in com.veriplace.web">RespondedException</A>,
                                         <A HREF="../../../com/veriplace/client/RequestDeniedException.html" title="class in com.veriplace.client">RequestDeniedException</A>,
                                         <A HREF="../../../com/veriplace/client/UnexpectedException.html" title="class in com.veriplace.client">UnexpectedException</A>,
                                         <A HREF="http://java.sun.com/j2ee/sdk_1.3/techdocs/api/javax/servlet/ServletException.html" title="class or interface in javax.servlet">ServletException</A></PRE>
<DL>
<DD>Attempts to obtain permission to locate the current Veriplace user, if that permission isn't
 already present in the current state.  If you haven't already identified the user using
 <A HREF="../../../com/veriplace/web/VeriplaceState.html#requireUser()"><CODE>requireUser()</CODE></A> or <A HREF="../../../com/veriplace/web/VeriplaceState.html#setUser(com.veriplace.client.User)"><CODE>setUser(com.veriplace.client.User)</CODE></A>, then this calls
 <A HREF="../../../com/veriplace/web/VeriplaceState.html#requireUser()"><CODE>requireUser()</CODE></A> first.
 <p>
 If this method returns with no exceptions, permission is now available.  You can call
 <A HREF="../../../com/veriplace/web/VeriplaceState.html#getGetLocationPermissionToken()"><CODE>getGetLocationPermissionToken()</CODE></A> to get the permisison token, if you need
 to save it for future reuse. 
 <p>
 Either the user discovery step or the permission step may cause a redirect to the Veriplace
 site.  When Veriplace redirects back to your application, it will be to the same URL and with
 the same HTTP parameters as the initial request, but with an additional token to indicate that
 the permission is now available.  You do not need to check for this token; just call
 requireGetLocationPermission(state) as you did before, and this time the method will return normally.
 <p>
 The Veriplace instance maintains a token cache containing the last known valid permission token for
 each user, which it will try to reuse if you call <A HREF="../../../com/veriplace/web/VeriplaceState.html#requireLocation()"><CODE>requireLocation()</CODE></A>.  However,
 it will <i>not</i> use this cache if you call requireGetLocationPermission separately from
 requireLocation, because the token might have expired and there would be no way to know this
 if you didn't go on to actually request a location.  Therefore, requireGetLocationPermission
 always asks the Veriplace server for a current permission.
<P>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../com/veriplace/web/RespondedException.html" title="class in com.veriplace.web">RespondedException</A></CODE> - if the client has sent a redirect response; you should simply
   stop handling the request and return in this case
<DD><CODE><A HREF="../../../com/veriplace/client/RequestDeniedException.html" title="class in com.veriplace.client">RequestDeniedException</A></CODE> - if either the user discovery request or the permission request was
   denied (check the subclass of the exception to see which one)
<DD><CODE><A HREF="../../../com/veriplace/client/UnexpectedException.html" title="class in com.veriplace.client">UnexpectedException</A></CODE> - if there was an unexpected I/O error or OAUth error from the server
<DD><CODE><A HREF="http://java.sun.com/j2ee/sdk_1.3/techdocs/api/javax/servlet/ServletException.html" title="class or interface in javax.servlet">ServletException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="requireGetLocationPermissionImmediate()"><!-- --></A><H3>
requireGetLocationPermissionImmediate</H3>
<PRE>
public void <B>requireGetLocationPermissionImmediate</B>()
                                           throws <A HREF="../../../com/veriplace/client/GetLocationNotPermittedException.html" title="class in com.veriplace.client">GetLocationNotPermittedException</A>,
                                                  <A HREF="../../../com/veriplace/client/UserDiscoveryException.html" title="class in com.veriplace.client">UserDiscoveryException</A>,
                                                  <A HREF="../../../com/veriplace/client/UnexpectedException.html" title="class in com.veriplace.client">UnexpectedException</A></PRE>
<DL>
<DD>Attempts to obtain permission to locate the current Veriplace user, if that permission isn't
 already present in the current state.  The user must already have been identified with
 <A HREF="../../../com/veriplace/web/VeriplaceState.html#requireUser()"><CODE>requireUser()</CODE></A> or <A HREF="../../../com/veriplace/web/VeriplaceState.html#setUser(com.veriplace.client.User)"><CODE>setUser(com.veriplace.client.User)</CODE></A>.
 This method will not perform any redirects and will not ask the user for permission if it wasn't
 previously granted; it will simply fail in that case.  If this method returns with no exceptions,
 permission is now available.  You can call <A HREF="../../../com/veriplace/web/VeriplaceState.html#getGetLocationPermissionToken()"><CODE>getGetLocationPermissionToken()</CODE></A>
 to get the permission token, if you need to save it for future reuse. 
 <p>
 The Veriplace instance maintains a token cache containing the last known valid permission token for
 each user, which it will try to reuse if you call <A HREF="../../../com/veriplace/web/VeriplaceState.html#requireLocation()"><CODE>requireLocation()</CODE></A>.  However,
 requireGetLocationPermissionImmediate does not use this cache; it always asks the Veriplace server
 for a current permission.
<P>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../com/veriplace/client/GetLocationNotPermittedException.html" title="class in com.veriplace.client">GetLocationNotPermittedException</A></CODE> - if the permission request was denied
<DD><CODE><A HREF="../../../com/veriplace/client/UserDiscoveryException.html" title="class in com.veriplace.client">UserDiscoveryException</A></CODE> - if you did not provide a valid user
<DD><CODE><A HREF="../../../com/veriplace/client/UnexpectedException.html" title="class in com.veriplace.client">UnexpectedException</A></CODE> - if there was an unexpected I/O error or OAUth error from the server</DL>
</DD>
</DL>
<HR>

<A NAME="requireLocation()"><!-- --></A><H3>
requireLocation</H3>
<PRE>
public void <B>requireLocation</B>()
                     throws <A HREF="../../../com/veriplace/web/RespondedException.html" title="class in com.veriplace.web">RespondedException</A>,
                            <A HREF="../../../com/veriplace/web/WaitingException.html" title="class in com.veriplace.web">WaitingException</A>,
                            <A HREF="../../../com/veriplace/client/RequestDeniedException.html" title="class in com.veriplace.client">RequestDeniedException</A>,
                            <A HREF="../../../com/veriplace/client/UnexpectedException.html" title="class in com.veriplace.client">UnexpectedException</A>,
                            <A HREF="http://java.sun.com/j2ee/sdk_1.3/techdocs/api/javax/servlet/ServletException.html" title="class or interface in javax.servlet">ServletException</A></PRE>
<DL>
<DD>Attempts to locate the current Veriplace user, if a location isn't already present in the
 current state.  If you haven't already identified the user or obtained location permission,
 then this calls <A HREF="../../../com/veriplace/web/VeriplaceState.html#requireUser()"><CODE>requireUser()</CODE></A> and/or <A HREF="../../../com/veriplace/web/VeriplaceState.html#requireGetLocationPermission()"><CODE>requireGetLocationPermission()</CODE></A>
 first in the correct order.
 <p>
 If this method returns with no exceptions, call <A HREF="../../../com/veriplace/web/VeriplaceState.html#getLocation()"><CODE>getLocation()</CODE></A> on the
 VeriplaceState to get the location data.
 <p>
 Either the user discovery step or the permission step may cause a redirect to the Veriplace
 site.  When Veriplace redirects back to your application, it will be to the same URL and with
 the same HTTP parameters as the initial request, but with an additional token to indicate that
 the location is now available.  You do not need to check for this token; just call
 requireLocation(state) as you did before, and this time the method will return normally.
 <p>
 Since it can take a noticeable amount of time to acquire location (if a new GPS fix is required),
 by default all location requests are done asynchronously on a separate thread.  This allows you
 to give the user some feedback in the meantime, such as a "please wait" page.  Veriplace handles
 this by throwing a <A HREF="../../../com/veriplace/web/WaitingException.html" title="class in com.veriplace.web"><CODE>WaitingException</CODE></A>, which contains a callback URL for continuing the
 current request; if you display a page that automatically redirects to that URL after a few
 seconds, your application will pick up where it left off, so that the next call to
 requireLocation(state) will either acquire the result or throw another WaitingException.
 (This process can be automated by designating a Waiting page ahead of time; see
 <A HREF="../../../com/veriplace/web/views/StatusViewRenderer.html" title="interface in com.veriplace.web.views"><CODE>StatusViewRenderer</CODE></A>.  If you use that approach, you will
 never get a WaitingException.)
<P>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../com/veriplace/web/RespondedException.html" title="class in com.veriplace.web">RespondedException</A></CODE> - if the client has sent a redirect response; you should simply
   stop handling the request and return in this case
<DD><CODE><A HREF="../../../com/veriplace/client/RequestDeniedException.html" title="class in com.veriplace.client">RequestDeniedException</A></CODE> - if either the user discovery request or the permission request was
   denied (check the subclass of the exception to see which one)
<DD><CODE><A HREF="../../../com/veriplace/web/WaitingException.html" title="class in com.veriplace.web">WaitingException</A></CODE> - if an asynchronous request is in progress and you should display
   an intermediate status page
<DD><CODE><A HREF="../../../com/veriplace/client/UnexpectedException.html" title="class in com.veriplace.client">UnexpectedException</A></CODE> - if there was an unexpected I/O error or OAUth error from the server
<DD><CODE><A HREF="http://java.sun.com/j2ee/sdk_1.3/techdocs/api/javax/servlet/ServletException.html" title="class or interface in javax.servlet">ServletException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="requireLocation(long)"><!-- --></A><H3>
requireLocation</H3>
<PRE>
public void <B>requireLocation</B>(long&nbsp;locationId)
                     throws <A HREF="../../../com/veriplace/web/RespondedException.html" title="class in com.veriplace.web">RespondedException</A>,
                            <A HREF="../../../com/veriplace/client/RequestDeniedException.html" title="class in com.veriplace.client">RequestDeniedException</A>,
                            <A HREF="../../../com/veriplace/client/UnexpectedException.html" title="class in com.veriplace.client">UnexpectedException</A>,
                            <A HREF="http://java.sun.com/j2ee/sdk_1.3/techdocs/api/javax/servlet/ServletException.html" title="class or interface in javax.servlet">ServletException</A></PRE>
<DL>
<DD>Attempts to retrieve a previously retrieved location again, using its ID (from
 <A HREF="../../../com/veriplace/client/Location.html#getId()"><CODE>Location.getId()</CODE></A>).  If you haven't already identified the user
 or obtained location permission, then this calls <A HREF="../../../com/veriplace/web/VeriplaceState.html#requireUser()"><CODE>requireUser()</CODE></A>
 and/or <A HREF="../../../com/veriplace/web/VeriplaceState.html#requireGetLocationPermission()"><CODE>requireGetLocationPermission()</CODE></A> first in the correct order,
 which may involve redirects.  However, the location request itself happens synchronously
 as a single server call.
 <p>
 If this method returns with no exceptions, call <A HREF="../../../com/veriplace/web/VeriplaceState.html#getLocation()"><CODE>getLocation()</CODE></A> to get the location data.
<P>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../com/veriplace/web/RespondedException.html" title="class in com.veriplace.web">RespondedException</A></CODE> - if the client has sent a redirect response; you should simply
   stop handling the request and return in this case
<DD><CODE><A HREF="../../../com/veriplace/client/RequestDeniedException.html" title="class in com.veriplace.client">RequestDeniedException</A></CODE> - if either the user discovery request or the permission request was
   denied (check the subclass of the exception to see which one)
<DD><CODE><A HREF="../../../com/veriplace/client/UnexpectedException.html" title="class in com.veriplace.client">UnexpectedException</A></CODE> - if there was an unexpected I/O error or OAUth error from the server
<DD><CODE><A HREF="http://java.sun.com/j2ee/sdk_1.3/techdocs/api/javax/servlet/ServletException.html" title="class or interface in javax.servlet">ServletException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="requireSetLocationPermission()"><!-- --></A><H3>
requireSetLocationPermission</H3>
<PRE>
public void <B>requireSetLocationPermission</B>()
                                  throws <A HREF="../../../com/veriplace/web/RespondedException.html" title="class in com.veriplace.web">RespondedException</A>,
                                         <A HREF="../../../com/veriplace/client/RequestDeniedException.html" title="class in com.veriplace.client">RequestDeniedException</A>,
                                         <A HREF="../../../com/veriplace/client/UnexpectedException.html" title="class in com.veriplace.client">UnexpectedException</A>,
                                         <A HREF="http://java.sun.com/j2ee/sdk_1.3/techdocs/api/javax/servlet/ServletException.html" title="class or interface in javax.servlet">ServletException</A></PRE>
<DL>
<DD>Attempts to obtain permission to change the current Veriplace user's location, if that
 permission isn't already present in the current state.  If you haven't already identified the
 user using <A HREF="../../../com/veriplace/web/VeriplaceState.html#requireUser()"><CODE>requireUser()</CODE></A> or <A HREF="../../../com/veriplace/web/VeriplaceState.html#setUser(com.veriplace.client.User)"><CODE>setUser(com.veriplace.client.User)</CODE></A>,
 then this calls <A HREF="../../../com/veriplace/web/VeriplaceState.html#requireUser()"><CODE>requireUser()</CODE></A> first.
 <p>
 Either the user discovery step or the permission step may cause a redirect to the Veriplace
 site.  When Veriplace redirects back to your application, it will be to the same URL and with
 the same HTTP parameters as the initial request, but with an additional token to indicate that
 the permission is now available.  You do not need to check for this token; just call
 requireSetLocationPermission(state) as you did before, and this time the method will return normally.
<P>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../com/veriplace/web/RespondedException.html" title="class in com.veriplace.web">RespondedException</A></CODE> - if the client has sent a redirect response; you should simply
   stop handling the request and return in this case
<DD><CODE><A HREF="../../../com/veriplace/client/RequestDeniedException.html" title="class in com.veriplace.client">RequestDeniedException</A></CODE> - if either the user discovery request or the permission request was
   denied (check the subclass of the exception to see which one)
<DD><CODE><A HREF="../../../com/veriplace/client/UnexpectedException.html" title="class in com.veriplace.client">UnexpectedException</A></CODE> - if there was an unexpected I/O error or OAUth error from the server
<DD><CODE><A HREF="http://java.sun.com/j2ee/sdk_1.3/techdocs/api/javax/servlet/ServletException.html" title="class or interface in javax.servlet">ServletException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="setUserLocation(com.veriplace.client.SetLocationParameters)"><!-- --></A><H3>
setUserLocation</H3>
<PRE>
public void <B>setUserLocation</B>(<A HREF="../../../com/veriplace/client/SetLocationParameters.html" title="class in com.veriplace.client">SetLocationParameters</A>&nbsp;parameters)
                     throws <A HREF="../../../com/veriplace/web/RespondedException.html" title="class in com.veriplace.web">RespondedException</A>,
                            <A HREF="../../../com/veriplace/web/WaitingException.html" title="class in com.veriplace.web">WaitingException</A>,
                            <A HREF="../../../com/veriplace/client/RequestDeniedException.html" title="class in com.veriplace.client">RequestDeniedException</A>,
                            <A HREF="../../../com/veriplace/client/UnexpectedException.html" title="class in com.veriplace.client">UnexpectedException</A>,
                            <A HREF="http://java.sun.com/j2ee/sdk_1.3/techdocs/api/javax/servlet/ServletException.html" title="class or interface in javax.servlet">ServletException</A></PRE>
<DL>
<DD>Attempts to change the current Veriplace user's location.  If you haven't already identified
 the user or obtained location update permission, then this calls <A HREF="../../../com/veriplace/web/VeriplaceState.html#requireUser()"><CODE>requireUser()</CODE></A>
 and/or <A HREF="../../../com/veriplace/web/VeriplaceState.html#requireSetLocationPermission()"><CODE>requireSetLocationPermission()</CODE></A> first in the correct order.
 <p>
 Either the user discovery step or the permission step may cause a redirect to the Veriplace
 site.  When Veriplace redirects back to your application, it will be to the same URL and with
 the same HTTP parameters as the initial request, but with an additional token to indicate that
 the location is now available.  You do not need to check for this token; just call
 setUserLocation() as you did before, and this time the method will return normally.
 <p>
 Since it can take several seconds to update location (due to the address geocoding), by default
 this request is handled asynchronously on a separate thread.  This allows you to give the user
 some feedback in the meantime, such as a "please wait" page.  Veriplace handles
 this by throwing a <A HREF="../../../com/veriplace/web/WaitingException.html" title="class in com.veriplace.web"><CODE>WaitingException</CODE></A>, which contains a callback URL for continuing the
 current request; if you display a page that automatically redirects to that URL after a few
 seconds, your application will pick up where it left off, so that the next call to
 setUserLocation(state) will either acquire the result or throw another WaitingException.
 (This process can be automated by designating a Waiting page ahead of time; see
 <A HREF="../../../com/veriplace/web/views/StatusViewRenderer.html" title="interface in com.veriplace.web.views"><CODE>StatusViewRenderer</CODE></A>.  If you use that approach, you will
 never get a WaitingException.)
 <p>
 After a successful location update, you can call <A HREF="../../../com/veriplace/web/VeriplaceState.html#getLocation()"><CODE>getLocation()</CODE></A> to get the
 new location details (i.e. the longitude and latitude if you provided an address string, or vice
 versa).
<P>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../com/veriplace/web/RespondedException.html" title="class in com.veriplace.web">RespondedException</A></CODE> - if the client has sent a redirect response; you should simply
   stop handling the request and return in this case
<DD><CODE><A HREF="../../../com/veriplace/client/RequestDeniedException.html" title="class in com.veriplace.client">RequestDeniedException</A></CODE> - if either the user discovery request or the permission request was
   denied (check the subclass of the exception to see which one)
<DD><CODE><A HREF="../../../com/veriplace/web/WaitingException.html" title="class in com.veriplace.web">WaitingException</A></CODE> - if an asynchronous request is in progress and you should display
   an intermediate status page
<DD><CODE><A HREF="../../../com/veriplace/client/UnexpectedException.html" title="class in com.veriplace.client">UnexpectedException</A></CODE> - if there was an unexpected I/O error or OAUth error from the server
<DD><CODE><A HREF="http://java.sun.com/j2ee/sdk_1.3/techdocs/api/javax/servlet/ServletException.html" title="class or interface in javax.servlet">ServletException</A></CODE></DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../com/veriplace/web/Veriplace.html" title="class in com.veriplace.web"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../com/veriplace/web/WaitingException.html" title="class in com.veriplace.web"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?com/veriplace/web/VeriplaceState.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="VeriplaceState.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
